version: "3"
services: 
  bitcoin:
    image: ruimarinho/bitcoin-core:0.16.0
    networks: 
      bge_network:
        ipv4_address: 172.25.1.2 
    ports:
      - "18444:18444"
    command: 
      -printtoconsole
      -regtest=1
      -rest
      -rpcallowip=173.249.18.12
      -rpcpassword=bar
      -rpcport=18333
      -rpcuser=foo
      -server
    volumes:
      - "${DIR}/data/bitcoin:/home/bitcoin/.bitcoin"
      - "${DIR}/docker/bitcoin/bitcoin.conf:/etc/bitcoin/bitcoin.conf"
  postgres:
    image: postgres:10.1
    networks:
      bge_network:
        ipv4_address: 172.25.1.3
    expose:
      - 5433
    ports:
      - "5433:5433"
    environment:
      POSTGRES_USER: root
      POSTGRES_PASSWORD: trivial
      POSTGRES_DB: postgres2
    volumes:
      - "${DIR}/data/psql:/var/lib/postgresql/data"
      - "${DIR}/docker/postgres/postgres.conf:/etc/postgresql/postgresql.conf"
    command:
      -c
      config_file=/etc/postgresql/postgresql.conf
networks:
  bge_network:
    driver: bridge
    ipam:
      driver: default
      config:
      -
        subnet: 172.25.1.0/24
